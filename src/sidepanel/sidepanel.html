<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Preview</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="sidepanel-container">
    <!-- Header -->
    <header class="sidepanel-header">
      <h1>Markdown Preview</h1>
      <div class="header-actions">
        <button id="copy-btn" class="icon-btn" title="Copy Markdown">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
        </button>
        <button id="download-btn" class="icon-btn" title="Download Markdown">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </button>
        <button id="translate-btn" class="icon-btn hidden" title="Translate to Japanese">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="sidepanel-content">
      <!-- Loading State -->
      <div id="loading-state" class="state-message">
        <div class="spinner"></div>
        <p>Extracting content...</p>
      </div>

      <!-- Error State -->
      <div id="error-state" class="state-message hidden">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h2>Failed to extract content</h2>
        <p id="error-message"></p>
        <button id="retry-btn" class="primary-btn">Retry</button>
      </div>

      <!-- Empty State -->
      <div id="empty-state" class="state-message hidden">
        <div class="empty-icon">üìÑ</div>
        <h2>No content yet</h2>
        <p>Click the extension icon and select "Extract" to convert the current page to Markdown.</p>
      </div>

      <!-- Content View -->
      <div id="content-view" class="hidden">
        <!-- Metadata Section -->
        <div id="metadata-section" class="metadata">
          <h1 id="article-title"></h1>
          <div class="meta-info">
            <span id="article-author" class="meta-item"></span>
            <span id="article-date" class="meta-item"></span>
            <a id="article-url" class="meta-item meta-link" target="_blank"></a>
          </div>
        </div>

        <!-- Translation Status Message (Issue #88) -->
        <div id="translation-status" class="translation-status hidden"></div>

        <!-- Translation Toggle (Issue #84) -->
        <div id="translation-toggle" class="translation-toggle hidden">
          <button id="show-original-btn" class="toggle-btn active">Original</button>
          <button id="show-translation-btn" class="toggle-btn">ÁøªË®≥ (Japanese)</button>
        </div>

        <!-- View Tabs -->
        <div class="view-tabs">
          <button id="preview-tab" class="tab-btn active">Preview</button>
          <button id="markdown-tab" class="tab-btn">Markdown</button>
        </div>

        <!-- View Controls (Issue #51) -->
        <div class="view-controls">
          <button id="reload-btn" class="control-btn" title="Reload current article">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <polyline points="1 20 1 14 7 14"></polyline>
              <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
            Reload
          </button>
          <div class="control-group">
            <label for="font-select">Font:</label>
            <select id="font-select" class="control-select">
              <option value="default">Default</option>
              <option value="serif">Serif</option>
              <option value="sans-serif">Sans-serif</option>
              <option value="monospace">Monospace</option>
            </select>
          </div>
          <div class="control-group">
            <label>Size:</label>
            <button id="font-decrease-btn" class="control-btn-small" title="Decrease font size">A-</button>
            <button id="font-increase-btn" class="control-btn-small" title="Increase font size">A+</button>
          </div>
        </div>

        <!-- Preview View (Rendered HTML) -->
        <div id="preview-view" class="markdown-content"></div>

        <!-- Markdown View (Raw Text) -->
        <div id="markdown-view" class="markdown-source hidden">
          <pre><code id="markdown-code"></code></pre>
        </div>
      </div>
    </main>
  </div>

  <script src="../lib/marked.js"></script>
  <script src="sidepanel.js"></script>
</body>
</html>
